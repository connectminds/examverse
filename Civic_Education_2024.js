const questions = [
   {
        question: "Democratic society are run and governed by",
        answers: [
            { text: "laws", correct: true },
            { text: "monarchs", correct: false },
            { text: "passion", correct: false },
            { text: "charisma", correct: false }
        ]
    },
    
    {
        question: "To guarantee the rights and freedom of citizens, the power of the organs of government must be",
        answers: [
            { text: "rotated", correct: false },
            { text: "separated", correct: true },
            { text: "fused", correct: false },
            { text: "incorpareted", correct: false }
        ]
    },

    {
        question: "Which of the following is an example of inalienable right? ",
        answers: [
            { text: "Right to life", correct: true },
            { text: "Right to vote", correct: false },
            { text: "Right to social security", correct: false },
            { text: "Right to adequate wages", correct: false }
        ]
    },

    {
        question: "Citizenship can be acquired through",
        answers: [
            { text: "nationalization", correct: false },
            { text: "registration", correct: true },
            { text: "negotiation", correct: false },
            { text: "decree", correct: false }
        ]
    },

    {
        question: "Which of the following rights <b>cannot</b> be enjoyed by an Italian citizen that is residing in a West African country?",
        answers: [
            { text: "freedom of expresssion", correct: false },
            { text: "ownership of properties", correct: false },
            { text: "Right to worship", correct: false },
            { text: "Right to vote", correct: true }
        ]
    },
    
    {
        question: "One of the outstanding features of citizenship by birth is that",
        answers: [
            { text: "it can be withdrawn.", correct: false },
            { text: "it can never be forfeited.", correct: true },
            { text: "special requirement are attached.", correct: false },
            { text: "it can be reverted to alien status.", correct: false }
        ]
    },

    {
        question: "In order to reduce over-reliance on foreign grants, civil society organizations need to",
        answers: [
            { text: "create revenue generation activities.", correct: true },
            { text: "become more national in their spread and membership.", correct: false },
            { text: "engage in more pragmatic methods like lobbying.", correct: false },
            { text: "engage the state for funding.", correct: false }
        ]
    },

    
    {
        question: "The <b>major</b> constraint to national development is  ",
        answers: [
            { text: "improper assesement of polices.", correct: false },
            { text: "overdependence on natural resources.", correct: false },
            { text: "high level of nepotism.", correct: true },
            { text: "absence of modern technology.", correct: false }
        ]
    },

    {
        question: "The conduct of an election in a democracy is the responsibility of ",
        answers: [
            { text: "electorial commission.", correct: true },
            { text: "security agncies.", correct: false },
            { text: "election stakeholders.", correct: false },
            { text: "civil society.", correct: false }
        ]
    },
    
    {
        question: "Accepting other people's opinions and preferences, even when they live in a way One does not agree with defines ",
        answers: [
            { text: "honesty.", correct: false },
            { text: "tolerance.", correct: true },
            { text: "cooperation.", correct: false },
            { text: "courage.", correct: false }
        ]
    },
    
    {
        question: "Civil society organizations fight poverty by ",
        answers: [
            { text: "checking the emergence of dictatorship.", correct: false },
            { text: "strengthening good governance.", correct: true },
            { text: "providing arena for the expresssion of diverse interest.", correct: false },
            { text: "supporting the ruling political party.", correct: false }
        ]
    },

    {
        question: "The constitution is important because it",
        answers: [
            { text: "allows government institutions to act anyhow.", correct: false },
            { text: "enables a particular ethnic group to control the government.", correct: false },
            { text: "is applicable to the president only.", correct: false },
            { text: "repulates all citizens.", correct: true }
        ]
    },

    {
        question: "Which of the following does a civil society advocate for?",
        answers: [
            { text: "Subjective criticism of government", correct: false },
            { text: "Emergence of dictatorship and political extremism", correct: false },
            { text: "Violent demonstration to express views or positions", correct: false },
            { text: "Objectivity and respect for opppsing views", correct: true }
        ]
    },

    {
        question: "A responsible citizen can show loyalty and devotion to his country by",
        answers: [
            { text: "invloving in jungle justice", correct: false },
            { text: "reporting any act of sabotage", correct: true },
            { text: "prosecuting criminals", correct: false },
            { text: "arresting criminals", correct: false }
        ]
    },

    {
        question: "Violations of traffic codes are often dealth with by ",
        answers: [
            { text: "loss of driving priviledges", correct: false },
            { text: "criminal court", correct: false },
            { text: "payment of damages", correct: false },
            { text: "forfeiting a fine", correct: true }
        ]
    },

    {
        question: "Civil society is regarded as an important organ of the society because it",
        answers: [
            { text: "invloves the operation of government.", correct: false },
            { text: "takes position on important ploicy questions", correct: true },
            { text: "represnts the inetrests of powerful groups", correct: false },
            { text: "improves the generality of citizens' well being", correct: false }
        ]
    },
    
    {
        question: "Building national values and ethical cultures can be hindered by",
        answers: [
            { text: "celebrating right people by media or society.", correct: false },
            { text: "punishing influential individuals for misdeeds", correct: false },
            { text: "poor citizenship or fellowship", correct: true },
            { text: "strengthening societal worth or morals", correct: false }
        ]
    },

    {
        question: "Establishment, maintenance and regulation of slaughterhouses and stabs is the statutory role of",
        answers: [
            { text: "federal government.", correct: false },
            { text: "state government", correct: false },
            { text: "regional government", correct: false },
            { text: "local government", correct: true }
        ]
    },

    {
        question: "Public servants are directly responsible for the poor service delivery due to",
        answers: [
            { text: "poor working mindsets.", correct: false },
            { text: "misallocation of resources", correct: false },
            { text: "poor condition of service", correct: true },
            { text: "overbearing external influence", correct: false }
        ]
    },

    {
        question: "Which of the following defines a legal member of a state?",
        answers: [
            { text: "Follower", correct: false },
            { text: "Alien", correct: false },
            { text: "Citizen", correct: true },
            { text: "Leader", correct: false }
        ]
    },

    {
        question: "Constant appreciation of children by parents",
        answers: [
            { text: "makes children to be arrogant.", correct: false },
            { text: "promotes withdrawal syndrome in children.", correct: false },
            { text: "makes children secretive and selfless.", correct: false },
            { text: "builds strong and confident children.", correct: true }
        ]
    },

    {
        question: "An individual who abuses drug will experince the following except",
        answers: [
            { text: "healthy immune system", correct: true },
            { text: "withdrawal", correct: false },
            { text: "depression", correct: false },
            { text: "traces of insanity", correct: false }
        ]
    },

    {
        question: "The right to rule based on recognition of personal qualities is known as",
        answers: [
            { text: "traditional authority.", correct: false },
            { text: "charistamic authority.", correct: true },
            { text: "legal authority.", correct: false },
            { text: "rational authority.", correct: false }
        ]
    },

    {
        question: "The Universal Declaration of Human Rights (UDHR) was proclaimed by the United Nation's ",
        answers: [
            { text: "Security Council.", correct: false },
            { text: "General Assembly.", correct: true },
            { text: "International court of Justice", correct: false },
            { text: "Economic and Social Court", correct: false }
        ]
    },

    {
        question: "Dependency on forign donors by civil society organization primarily ",
        answers: [
            { text: "promote a long term strategy of chasing funds.", correct: false },
            { text: "distracts the organizations from their missions.", correct: true },
            { text: "promotes sustainability.", correct: false },
            { text: "increase scope of activities", correct: false }
        ]
    },

    {
        question: "The right to work in any part of the country can be regarded as",
        answers: [
            { text: "natural rights", correct: false },
            { text: "civic rights", correct: true },
            { text: "economic rights", correct: false },
            { text: "social rights", correct: false }
        ]
    },

    {
        question: "Political participation can be limited by",
        answers: [
            { text: "wealth", correct: true },
            { text: "gender", correct: false },
            { text: "age", correct: false },
            { text: "religion", correct: false }
        ]
    },

    {
        question: "<b>One</b> of the roles of the police as an important pillar of democracy is",
        answers: [
            { text: "subjecting citizens to the wishes of leaders.", correct: false },
            { text: "guarding and protecting sensitive election materials", correct: true },
            { text: "suppressing opposition to the government", correct: false },
            { text: "helping the incumbent governmentto continue in office.", correct: false }
        ]
    },

    {
        question: "Which of the following institutions was setup to address the unfair treatment of citizens by public servants?",
        answers: [
            { text: "Independent Corrupt Practices Commission", correct: false },
            { text: "Economics and Financial Crimes", correct: false },
            { text: "Public Compliant Commission/Ombudsman.", correct: true },
            { text: "International Labour Oragization", correct: false }
        ]
    },

    {
        question: "Some Civil Society Orgaization do not get the needed attention from the government because of",
        answers: [
            { text: "awareness of their activities", correct: false },
            { text: "confrontation in some sensitive issues", correct: true },
            { text: "overbearing external influence", correct: false },
            { text: "open nature of the organization", correct: false }
        ]
    },

    {
        question: "The reason the seven core freedoms of the Universal Declaration of Human Rights(UDHR) are so important is because",
        answers: [
            { text: "they concern individual directly and influence their peaceful existence as human beings", correct: true },
            { text: "the violation of one right often leads to violation of another right", correct: false },
            { text: "they embody key values and rights of human beings", correct: false },
            { text: "they enable individuals to speak up and change poor treatment from a public authority", correct: false }
        ]
    },
    
    {
        question: "The role of individual in the Universal Declaration of Human Rights (UDHR) includes",
        answers: [
            { text: "incorperation of UDHR into the national constitution", correct: false },
            { text: "enacting laws that promote the objective of UDHR", correct: false },
            { text: "tolerance of other people's views, opinions, belief etc", correct: true },
            { text: "carrying out advocacy programmes through the mass media", correct: false }
        ]
    },

    {
        question: "Bureaucracy in public service simply means",
        answers: [
            { text: "favouritism", correct: false },
            { text: "nepotism", correct: false },
            { text: "red-tapism", correct: true },
            { text: "patriotism", correct: false }
        ]
    },

    {
        question: "Constant change in oublic service has led to",
        answers: [
            { text: "overdependence on crude oil", correct: false },
            { text: "abandonment of many projects", correct: true },
            { text: "large scale of unemployment", correct: false },
            { text: "poor standard of living", correct: false }
        ]
    },

    {
        question: "The rule of law requires that",
        answers: [
            { text: "government should be subject to the law", correct: true },
            { text: "the law should be subject to the government", correct: false },
            { text: "law should be made in respect to an individual", correct: false },
            { text: "the law should be subject to traditional rulers", correct: false }
        ]
    },

    {
        question: "Youth employment programmes are aimed at giving the youth the opportunity to",
        answers: [
            { text: "become exceedingly wealthy", correct: false },
            { text: "be self sufficient", correct: true },
            { text: "be physically strong", correct: false },
            { text: "have all their wants meet", correct: false }
        ]
    },

    {
        question: "To end the compulsive behaviour of drug addiction. Drug addicts",
        answers: [
            { text: "can quit by themselves.", correct: false },
            { text: "need support and treatment.", correct: true },
            { text: "can relocate to a new environment.", correct: false },
            { text: "should take a lesser dosage of drugs.", correct: false }
        ]
    },

    {
        question: "One can support a person with substance abuse problem by",
        answers: [
            { text: "counselling and rehabilitation. ", correct: true },
            { text: "hiding or throwing out drugs.", correct: false },
            { text: "taking over the drug abuser's responsibilities.", correct: false },
            { text: "covering up or making excuses for the drug abuser.", correct: false }
        ]
    },

    {
        question: "Trafficked person are <b>mainly</b> lured with the promose of ",
        answers: [
            { text: "schooling", correct: false },
            { text: "love", correct: false },
            { text: "employment", correct: true },
            { text: "protection", correct: false }
        ]
    },

    {
        question: "A <b>major</b> source of funds to local government authorities is",
        answers: [
            { text: "donations", correct: false },
            { text: "import duties", correct: false },
            { text: "taxes", correct: true },
            { text: "utility bills", correct: false }
        ]
    },

    {
        question: "Which of the following is the factor in fostering cooperation among members of a society?",
        answers: [
            { text: "Discipline", correct: false },
            { text: "Empathy", correct: false },
            { text: "Maturity", correct: false },
            { text: "Understanding", correct: true }
        ]
    },

    {
        question: "Which of the immune system cells does <i>HIV</i> target or attack?",
        answers: [
            { text: "B-cells", correct: false },
            { text: "T-cells", correct: true },
            { text: "NK cells", correct: false },
            { text: "Red Blood Cells", correct: false }
        ]
    },

    {
        question: "Values are what we ",
        answers: [
            { text: "can see, feel and touch.", correct: false },
            { text: "believe in and imbibe", correct: true },
            { text: "avoid like a plague", correct: false },
            { text: "know as agents of civic education", correct: false }
        ]
    },

    {
        question: "One of the citizenship values inculcated by parents into their children includes",
        answers: [
            { text: "tax evasion", correct: false },
            { text: "arrest of criminals", correct: false },
            { text: "fairness to all", correct: true },
            { text: "mob action", correct: false }
        ]
    },

    {
        question: "The boldness to be honest in persecution is a manifestation of",
        answers: [
            { text: "humility.", correct: false },
            { text: "obedience.", correct: false },
            { text: "strength.", correct: false },
            { text: "courage", correct: true }
        ]
    },

    {
        question: "Civic Education is also called",
        answers: [
            { text: "Civic socialism", correct: false },
            { text: "citizenship education", correct: true },
            { text: "Citizenship socialism", correct: false },
            { text: "Cultural education", correct: false }
        ]
    },

    {
        question: "Which of the following is not an agent of civic education?",
        answers: [
            { text: "Family", correct: false },
            { text: "Print and electronic media", correct: false },
            { text: "Pressure groups", correct: false },
            { text: "Ministry of Labour and productivity", correct: true }
        ]
    },

    {
        question: "The fundamental agent in children guidance, training and education is",
        answers: [
            { text: "peers.", correct: false },
            { text: "parents.", correct: true },
            { text: "society.", correct: false },
            { text: "schools.", correct: false }
        ]
    },

    {
        question: "The <b>most</b> common method of acquiring the citizenship of a country is by",
        answers: [
            { text: "registration", correct: false },
            { text: "birth", correct: true },
            { text: "marriage", correct: false },
            { text: "naturalization", correct: false }
        ]
    },

    {
        question: "The qualities of being fair and reasonable in the way that people are treated is known as",
        answers: [
            { text: "integrity.", correct: false },
            { text: "love.", correct: false },
            { text: "justice.", correct: true },
            { text: "honesty.", correct: false }
        ]
    }
];


// Duplicate early declarations and the broken showQuestion were removed;
// the script uses the later, corrected declarations and functions below.

const questionElement = document.getElementById("question");
const answerButtons = document.getElementById("answer-buttons");
const nextButton = document.getElementById("next-btn");
const resultSection = document.getElementById("result");
const correctCount = document.getElementById("correct-count");
const missedCount = document.getElementById("missed-count");
const totalCount = document.getElementById("total-count");
const restartBtn = document.getElementById("restart-btn");
const progressBar = document.getElementById("progress-bar");

let currentQuestionIndex = 0;
let score = 0;
let missed = 0;
let chart;

// Start quiz
function startQuiz() {
  currentQuestionIndex = 0;
  score = 0;
  missed = 0;
  nextButton.innerText = "Next";
  resultSection.classList.add("hidden");
  document.querySelector(".quiz").classList.remove("hidden");
  showQuestion();
  updateProgress();
}

// Show question
function showQuestion() {
  resetState();
  const currentQuestion = questions[currentQuestionIndex];
  const questionNo = currentQuestionIndex + 1;
  questionElement.innerHTML = `${questionNo}. ${currentQuestion.question}`;

  currentQuestion.answers.forEach(answer => {
    const button = document.createElement("button");
    button.innerHTML = answer.text;
    button.classList.add("btn");
    if (answer.correct) button.dataset.correct = true;
    button.addEventListener("click", selectAnswer);
    answerButtons.appendChild(button);
  });
  updateProgress();
}

// Reset state
function resetState() {
  nextButton.style.display = "none";
  answerButtons.innerHTML = "";
}

// Handle answer click
function selectAnswer(e) {
  const selectedBtn = e.target;
  const isCorrect = selectedBtn.dataset.correct === "true";

  if (isCorrect) score++;
  else missed++;

  Array.from(answerButtons.children).forEach(button => {
    button.disabled = true;
    if (button.dataset.correct === "true") button.classList.add("correct");
    else if (button === selectedBtn && !isCorrect) button.classList.add("incorrect");
  });

  nextButton.style.display = "block";
}

// Handle next question
nextButton.addEventListener("click", () => {
  currentQuestionIndex++;
  if (currentQuestionIndex < questions.length) {
    showQuestion();
  } else {
    showResults();
  }
});

function updateProgress() {
  const progress = ((currentQuestionIndex) / questions.length) * 100;
  progressBar.style.width = `${progress}%`;
}

// Show results
function showResults() {
  document.querySelector(".quiz").classList.add("hidden");
  resultSection.classList.remove("hidden");

  correctCount.textContent = score;
  missedCount.textContent = missed;
  totalCount.textContent = questions.length;

  const correctPercent = ((score / questions.length) * 100).toFixed(1);
  const missedPercent = ((missed / questions.length) * 100).toFixed(1);

  if (chart) chart.destroy();
  chart = new Chart(document.getElementById("resultChart"), {
    type: "pie",
    data: {
      labels: ["Correct", "Missed"],
      datasets: [{
        data: [correctPercent, missedPercent],
        backgroundColor: ["#9aeabc", "#ff9393"]
      }]
    },
    options: {
      plugins: { legend: { position: "bottom" } },
      animation: { animateScale: true }
    }
  });
}

restartBtn.addEventListener("click", startQuiz);
startQuiz();
// Initialize Chart.js


